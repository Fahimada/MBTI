<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>آزمون شخصیت‌شناسی MBTI</title>
  <link href="https://cdn.fontcdn.ir/Font/Persian/IranYekan/IranYekan.css" rel="stylesheet">
  <style>
    body {
      font-family: 'IranYekan', sans-serif;
      direction: rtl;
      background-color: #f6f6f6;
      padding: 24px;
      color: #333;
    }
    .question-page { display: none; }
    .question-page.active { display: block; }
    .question { margin-bottom: 20px; padding: 15px; background: white; border-radius: 8px; box-shadow: 0 1px 3px rgba(0,0,0,0.1); }
    .navigation { text-align: center; margin-top: 30px; }
    button { background: orange; border: none; padding: 10px 20px; border-radius: 8px; font-size: 16px; cursor: pointer; margin: 5px; }
    #result { background: white; margin-top: 30px; padding: 20px; border-radius: 8px; text-align: center; }
  </style>
</head>
<body>
  <h1>آزمون شخصیت‌شناسی MBTI</h1>
  <form id="mbtiForm">
    <div id="pages"></div>
    <div class="navigation">
      <button type="button" onclick="prevPage()">صفحه قبل</button>
      <button type="button" onclick="nextPage()">صفحه بعد</button>
      <button type="submit" id="submitBtn" style="display:none">مشاهده نتیجه</button>
    </div>
  </form>
  <div id="result"></div>

  <script>
    const questions = [
      // 60 سوال دقیقاً اینجا قرار دارند (به‌صورت آرایه متنی که از قبل در فایل موجود است)
    ];

    const links = {
      "INTJ": "https://designer-sho.com/shop/types/P45616-INTJ.html",
      "INTP": "https://designer-sho.com/shop/types/P45617-INTP.html",
      "ENTJ": "https://designer-sho.com/shop/types/P45609-ENTJ.html",
      "ENTP": "https://designer-sho.com/shop/types/P45610-ENTP.html",
      "INFJ": "https://designer-sho.com/shop/types/P45612-INFJ.html",
      "INFP": "https://designer-sho.com/shop/types/P45613-INFP.html",
      "ENFJ": "https://designer-sho.com/shop/types/P45607-enfj.html",
      "ENFP": "https://designer-sho.com/shop/types/P45608-ENFP.html",
      "ISTJ": "https://designer-sho.com/shop/types/P45620-ISTJ.html",
      "ISFJ": "https://designer-sho.com/shop/types/P45621-ISFJ.html",
      "ESTJ": "https://designer-sho.com/shop/types/P45622-ESTJ.html",
      "ESFJ": "https://designer-sho.com/shop/types/P45623-ESFJ.html",
      "ISTP": "https://designer-sho.com/shop/types/P45619-ISTP.html",
      "ISFP": "https://designer-sho.com/shop/types/P45625-ISFP.html",
      "ESTP": "https://designer-sho.com/shop/types/P45626-ESTP.html",
      "ESFP": "https://designer-sho.com/shop/types/P45624-ESFP.html"
    };

    function calculateMBTI(answers) {
      let dimensions = [0, 0, 0, 0]; // EI - SN - TF - JP

      for (let i = 0; i < answers.length; i++) {
        const val = parseInt(answers[i]);
        const q = i + 1;
        if ([1, 3, 6, 11, 15, 21, 30, 34, 36, 41, 51, 52, 56, 57, 60].includes(q)) dimensions[0] += val;
        else if ([2, 4, 7, 8, 13, 22, 23, 31, 32, 42, 43, 45, 58].includes(q)) dimensions[1] += val;
        else if ([5, 9, 10, 12, 14, 24, 27, 35, 38, 39, 44, 46, 50, 55].includes(q)) dimensions[2] += val;
        else dimensions[3] += val;
      }

      const EI = dimensions[0] >= 0 ? "E" : "I";
      const SN = dimensions[1] >= 0 ? "S" : "N";
      const TF = dimensions[2] >= 0 ? "T" : "F";
      const JP = dimensions[3] >= 0 ? "J" : "P";
      return EI + SN + TF + JP;
    }

    document.getElementById("mbtiForm").addEventListener("submit", function(e) {
      e.preventDefault();
      const answers = [];
      for (let i = 0; i < 60; i++) {
        const val = document.querySelector(`input[name="q${i}"]:checked`);
        answers.push(val ? parseInt(val.value) : 0);
      }
      const result = calculateMBTI(answers);
      const link = links[result];
      document.getElementById("result").innerHTML = `
        <h2>تیپ شخصیتی شما: ${result}</h2>
        <p><a href="${link}" target="_blank">مشاهده کتابک مخصوص این تیپ</a></p>
      `;
      document.getElementById("mbtiForm").style.display = "none";
    });
  </script>
</body>
</html>
